" CONFIGURATION SETTINGS FOR NEOVIM

call plug#begin('~/.vim/plugged')

" 
	Plug 'scrooloose/nerdtree', { 'on': 'NERDTreeToggle' }
	Plug 'wellle/targets.vim'
	" Plug 'jistr/vim-nerdtree-tabs'
	" Plug 'majutsushi/tagbar'
	"Plug 'vim-airline/vim-airline'
	Plug 'NLKNguyen/copy-cut-paste.vim'
	Plug 'junegunn/fzf.vim'
	Plug 'itchyny/lightline.vim'
	" Plug 'terryma/vim-multiple-cursors'
	" Plug 'danro/rename.vim'
  Plug 'w0rp/ale'
	" Plug 'vim-gitgutter'
	" Plug 'vim-scripts/Vim-Support'
	Plug 'kien/ctrlp.vim'
	" Plug 'me-vlad/spellfiles.vim'
	" Plug 'tmhedberg/matchit'
	" Plug 'Valloric/YouCompleteMe', { 'do': './install.py --tern-completer' }
	Plug 'ryanoasis/vim-devicons'
	Plug 'maksimr/vim-jsbeautify'
	Plug 'editorconfig/editorconfig-vim'
	" Plug 'bkad/CamelCaseMotion'
  Plug 'morhetz/gruvbox'
  "Plug 'vim-syntastic/syntastic'
" PLUGINS AS UTILS
  Plug 'jiangmiao/auto-pairs'
  Plug 'alvan/vim-closetag'
	Plug 'tpope/vim-surround'
	Plug 'scrooloose/nerdcommenter'
	Plug 'mattn/emmet-vim'

" PLUGINS FOR SYNTAX
  Plug 'leafgarland/typescript-vim'
  Plug 'digitaltoad/vim-pug'
  Plug 'othree/html5.vim'
  Plug 'mxw/vim-jsx'
	Plug 'pangloss/vim-javascript'
	Plug 'cakebaker/scss-syntax.vim'
call plug#end()

" TEMPORARY OPRIONS, LATER SHOULD BE TRANSMITED TO THE RIGHT PLACE
set exrc
set secure
set path+=**

" end

" OPTIONS ======================================================= 
" [https://www.shortcutfoo.com/blog/top-50-vim-configuration-options/]
" 	Indention =================
set autoindent
set smartindent
set tabstop=2
set shiftwidth=2
set expandtab
set nosmarttab

"	Search ======================
set hlsearch
set ignorecase
set incsearch
set smartcase

"	Persormance =================
set lazyredraw

"	Text rendering ==============
set display+=lastline
set encoding=UTF-8
set linebreak
set scrolloff=7
set sidescrolloff=5
set wrap
set textwidth=0

"	User interface ==============
set laststatus=2
set ruler
set wildmenu
set cursorline
set number
set norelativenumber
set title
set noerrorbells
set novisualbell
set mouse=a

"	Code folding ================
set foldmethod=marker
set nofoldenable
set foldnestmax=2

"	Miscellaneous options =======
set autoread
set backupdir=~/.vim/temp
set directory=~/.vim/temp
set undodir=~/.vim/temp
set nowritebackup
set confirm
set hidden
set history=1000
set noswapfile
" set shell=powershell
set nospell

set encoding=UTF-8
set guifont=Consolas:h15
set cursorline
set colorcolumn=0

set noshowmatch		" cursor no jumps to parent bracket
set backspace=indent,eol,start


" MAPPING =======================================================
let mapleader = ","

inoremap jk <esc>
inoremap ;; <esc>:
noremap <leader>q :q<cr>
noremap <leader>x :x<cr>
" FUNCTIONAL KEYS
noremap <silent> <F7> :NERDTreeToggle<cr>
noremap <silent> <F8> :TagbarToggle<cr>
" navigation tabs/buffers
nnoremap <leader>s <c-w>W
nnoremap <leader>d <c-w>w

nnoremap <silent> <c-j> <c-w>W
nnoremap <silent> <c-k> <c-w>w
nnoremap <silent> <a-h> gT
nnoremap <silent> <a-l> gt

nnoremap <leader>r :e %<cr>

nmap <c-,> <c-y>,
imap <c-,> <c-y>,jk

nnoremap : ;
nnoremap ; :
vnoremap : ;
vnoremap ; :

" nnoremap j gj
" nnoremap k gk
" inoremap j gj
" inoremap k gk

nnoremap <leader>w :w<cr>
nnoremap <c-s> :w<cr>
inoremap <leader>w <esc>:w<cr>
inoremap <c-s> <esc>:w<cr>
nnoremap <leader>q :q!<cr>
nnoremap <leader>x :x<cr>
nnoremap <a-q>u :qa!<cr>
nnoremap <space> i<space><esc>l
nnoremap <enter> i<enter><esc>l
nnoremap <backspace> i<backspace><esc>l
nnoremap vv ggVG

nnoremap <leader>co oconsole.log();<esc><left>i
inoremap <leader>co console.log();<esc><left>i

" ABBREVIATIONS ==================================================
iabbrev cnsl console.log( );<left><left><left>
iabbrev <== <?= ?><left><left><left>

"inoremap {<cr> {<cr>}<esc>O
"inoremap {{ {<cr><cr>}<esc>o
"inoremap {<space> {  }<left><left>
"inoremap [<cr> [<cr>]<esc>O
"inoremap [[ [<cr><cr>]<esc>o
"inoremap [<space> [  ]<left><left>
"inoremap (<cr> (<cr>)<esc>O
"inoremap (( (<cr><cr>)<esc>o
"inoremap (<space> (  )<left><left>

autocmd BufNewFile *.phtml :set filetype=html

map <F5> :wall!<CR>:!sbcl --load foo.cl<CR><CR>

" SETTINGS
"nnoremap <silent> <c-s>w :set wrap!<cr>
"nnoremap <silent> <c-s>l :set list!<cr>
"nnoremap <silent> <c-s>c :source $myvimrc<cr>
"nnoremap <silent> <c-s>r :e %<cr>
"nnoremap <silent> <c-s>vc tabe ~\vim-configuration\myvimrc<cr>


cnoremap jk <esc>

if has('nvim')
	colorscheme dracula
	if has('win32')
		se shell=powershell.exe
	endif
	autocmd VimEnter :Guifont Consolas:h15
	" Guifont Consolas:h14

	" autocmd vimenter * :cd ~
	" autocmd vimenter * :NERDTree
	" autocmd vimenter * :Guifont Consolas:h14

	tnoremap <a-h> <c-\><c-n>gT
	tnoremap <a-l> <c-\><c-n>gt
	tnoremap <leader>s <c-\><c-n><c-w>W
	tnoremap <leader>d <c-\><c-n><c-w>w
	tnoremap <esc> <c-\><c-n>
	tnoremap jk <c-\><c-n>
	tnoremap <leader>q <c-\><c-n>:q<cr>

	let g:terminal_color_0  = '#2e3436'
	let g:terminal_color_1  = '#cc0000'
	let g:terminal_color_2  = '#4e9a06'
	let g:terminal_color_3  = '#c4a000'
	let g:terminal_color_4  = '#3465a4'
	let g:terminal_color_5  = '#75507b'
	let g:terminal_color_6  = '#0b939b'
	let g:terminal_color_7  = '#d3d7cf'
	let g:terminal_color_8  = '#555753'
	let g:terminal_color_9  = '#ef2929'
	let g:terminal_color_10 = '#8ae234'
	let g:terminal_color_11 = '#fce94f'
	let g:terminal_color_12 = '#729fcf'
	let g:terminal_color_13 = '#ad7fa8'
	let g:terminal_color_14 = '#00f5e9'
	let g:terminal_color_15 = '#eeeeec'

	let g:NERDTreeDirArrowExpandable = "▸"
	let g:NERDTreeDirArrowCollapsible = "▾" 

	au! TermOpen * call CustomizeAfterTermOpen()
  au! BufEnter *powershell.exe call CustomizeAfterTermEnter()
  au! BufLeave *powershell.exe call CustomizeAfterTermLeave()

  function! CustomizeAfterTermOpen()
    se nonumber
    se foldcolumn=3
    se nospell
    syn region Search start=/PS/ end=/>/
    start
  endfunction
  function! CustomizeAfterTermEnter()
    start
  endfunction
  function! CustomizeAfterTermLeave()
  endfunction

endif

" source ~\vimscripts\
command! Vimrc tabe ~/vim-configuration/myvimrc
command! Conf source ~/vim-configuration/myvimrc
command! Beautify call JsBeautify()
command! HtmlBeautify call HtmlBeautify()
command! Font Guifont Consolas:h15

let g:NERDTreeWinPos = "right"
let g:NERDTreeShowHidden = 1

au BufNewFile,BufRead *.vladsyntax  setf vladsyntax
au BufNewFile,BufRead *.vladjs  setf vladjs

syn keyword customKeywords console.log
syn region Search start=/console/ end=/;/

" end Plugin CamelCaseMotion

" Syntax hightlighting
"syn clear
"hi shouldOutline guibg=#ffffff guifg=#000000 gui=bold
"syn keyword shouldOutline console log TODO NOTE
autocmd BufEnter *powershell.exe highlight Normal ctermbg=black
autocmd BufLeave *powershell.exe highlight Normal ctermbg=white

syn keyword DiffText console log consolelog console\.log

" vim-closetag
let g:closetag_filenames = '*.html,*.js'
